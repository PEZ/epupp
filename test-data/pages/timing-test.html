<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Epupp Test Page - Timing</title>
  <script>
    // Record when page scripts execute using high-resolution timing
    // Extension's document-start scripts should run BEFORE this
    window.__PAGE_SCRIPT_PERF = performance.now();
    window.__PAGE_SCRIPT_TIME = Date.now();
    window.__PAGE_SCRIPT_READY_STATE = document.readyState;
    console.log('[PageScript] Executed at readyState:', document.readyState, 'perf:', window.__PAGE_SCRIPT_PERF);
  </script>
</head>
<body>
  <h1>Timing Test Page</h1>
  <p>This page records when page scripts execute for timing comparison with extension scripts.</p>
  <div id="timing-marker"></div>
  <script>
    // Mark when body script runs (should be after head script)
    window.__PAGE_BODY_SCRIPT_PERF = performance.now();
    window.__PAGE_LOADED = true;
    document.getElementById('timing-marker').textContent =
      'Head script: ' + window.__PAGE_SCRIPT_PERF.toFixed(2) + 'ms, ' +
      'Body script: ' + window.__PAGE_BODY_SCRIPT_PERF.toFixed(2) + 'ms';
  </script>
</body>
</html>
