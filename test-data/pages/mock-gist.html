<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Mock Gist Page - Epupp Test</title>
  <style>
    .file { border: 1px solid #ddd; margin: 20px; border-radius: 6px; }
    .file-header { background: #f6f8fa; padding: 10px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; }
    .gist-blob-name { font-weight: bold; }
    .file-actions a { color: #0366d6; margin-left: 10px; }
    .blob-wrapper { padding: 10px; }
    pre { margin: 0; font-family: monospace; white-space: pre-wrap; }
    code { display: block; }
    /* GitHub gist style */
    .file-header.d-flex { display: flex; justify-content: space-between; }
    .file-info { flex: 1; }
    table.js-file-line-container { width: 100%; border-collapse: collapse; font-family: monospace; }
    td.blob-num { width: 50px; text-align: right; padding-right: 10px; color: #6e7681; user-select: none; }
    td.blob-code { padding-left: 10px; white-space: pre; }
  </style>
</head>
<body>
  <h1>Mock Gist Page</h1>
  <p>This page simulates GitHub Gist structure for E2E testing.</p>
  <div id="test-marker">ready</div>

  <!-- Installable gist file with valid manifest -->
  <div class="file" id="installable-gist">
    <div class="file-header">
      <span class="gist-blob-name">test_script.cljs</span>
      <div class="file-actions">
        <a href="http://localhost:18080/raw/test_script.cljs">Raw</a>
      </div>
    </div>
    <div class="blob-wrapper">
      <pre><code>{:epupp/script-name "Test Installer Script"
 :epupp/auto-run-match "*://test.example.com/*"
 :epupp/description "A test script for E2E testing"}

(ns test-installer-script)

(js/console.log "Test script loaded!")</code></pre>
    </div>
  </div>

  <!-- Non-installable file (no manifest) -->
  <div class="file" id="non-installable-gist">
    <div class="file-header">
      <span class="gist-blob-name">regular_code.cljs</span>
      <div class="file-actions">
        <a href="/raw/regular_code.cljs">Raw</a>
      </div>
    </div>
    <div class="blob-wrapper">
      <pre><code>(ns regular-code)

(defn hello [] "world")</code></pre>
    </div>
  </div>

  <!-- Manual-only gist file (valid manifest but NO auto-run-match) -->
  <div class="file" id="manual-only-gist">
    <div class="file-header">
      <span class="gist-blob-name">manual_only_script.cljs</span>
      <div class="file-actions">
        <a href="http://localhost:18080/raw/manual_only_script.cljs">Raw</a>
      </div>
    </div>
    <div class="blob-wrapper">
      <pre><code>{:epupp/script-name "Manual Only Script"
 :epupp/description "A script with no auto-run-match"}

(ns manual-only-script)

(js/console.log "Manual-only script loaded!")</code></pre>
    </div>
  </div>

  <!-- ========================================
       GitHub Gist Style Code Blocks (table-based)
       ======================================== -->

  <!-- GitHub-style installable gist -->
  <div class="file" id="github-installable-gist">
    <div class="file-header d-flex">
      <div class="file-actions">
        <a href="/raw/github_test_script.cljs">Raw</a>
      </div>
      <div class="file-info">
        <strong class="gist-blob-name">github_test_script.cljs</strong>
      </div>
    </div>
    <div class="blob-wrapper">
      <table class="js-file-line-container" data-tagsearch-path="github_test_script.cljs">
        <tr>
          <td class="blob-num js-line-number" data-line-number="1"></td>
          <td class="blob-code js-file-line">{:epupp/script-name "github_test_script.cljs"</td>
        </tr>
        <tr>
          <td class="blob-num js-line-number" data-line-number="2"></td>
          <td class="blob-code js-file-line"> :epupp/auto-run-match "*://github-test.example.com/*"</td>
        </tr>
        <tr>
          <td class="blob-num js-line-number" data-line-number="3"></td>
          <td class="blob-code js-file-line"> :epupp/description "A GitHub-style test script"}</td>
        </tr>
        <tr>
          <td class="blob-num js-line-number" data-line-number="4"></td>
          <td class="blob-code js-file-line"></td>
        </tr>
        <tr>
          <td class="blob-num js-line-number" data-line-number="5"></td>
          <td class="blob-code js-file-line">(ns github-test-script)</td>
        </tr>
        <tr>
          <td class="blob-num js-line-number" data-line-number="6"></td>
          <td class="blob-code js-file-line"></td>
        </tr>
        <tr>
          <td class="blob-num js-line-number" data-line-number="7"></td>
          <td class="blob-code js-file-line">(js/console.log "GitHub test script loaded!")</td>
        </tr>
      </table>
    </div>
  </div>

  <!-- GitHub-style non-installable (no manifest) -->
  <div class="file" id="github-non-installable">
    <div class="file-header d-flex">
      <div class="file-actions">
        <a href="/raw/github_regular.cljs">Raw</a>
      </div>
      <div class="file-info">
        <strong class="gist-blob-name">github_regular.cljs</strong>
      </div>
    </div>
    <div class="blob-wrapper">
      <table class="js-file-line-container" data-tagsearch-path="github_regular.cljs">
        <tr>
          <td class="blob-num js-line-number" data-line-number="1"></td>
          <td class="blob-code js-file-line">(ns github-regular)</td>
        </tr>
        <tr>
          <td class="blob-num js-line-number" data-line-number="2"></td>
          <td class="blob-code js-file-line"></td>
        </tr>
        <tr>
          <td class="blob-num js-line-number" data-line-number="3"></td>
          <td class="blob-code js-file-line">(defn greet [] "Hello from GitHub")</td>
        </tr>
      </table>
    </div>
  </div>

</body>
</html>
