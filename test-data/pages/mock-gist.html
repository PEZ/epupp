<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Mock Gist Page - Epupp Test</title>
  <style>
    .file { border: 1px solid #ddd; margin: 20px; border-radius: 6px; }
    .file-header { background: #f6f8fa; padding: 10px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; }
    .gist-blob-name { font-weight: bold; }
    .file-actions a { color: #0366d6; margin-left: 10px; }
    .blob-wrapper { padding: 10px; }
    pre { margin: 0; font-family: monospace; white-space: pre-wrap; }
    code { display: block; }
    /* GitHub gist style */
    .file-header.d-flex { display: flex; justify-content: space-between; }
    .file-info { flex: 1; }
    table.js-file-line-container { width: 100%; border-collapse: collapse; font-family: monospace; }
    td.blob-num { width: 50px; text-align: right; padding-right: 10px; color: #6e7681; user-select: none; }
    td.blob-code { padding-left: 10px; white-space: pre; }
  </style>
</head>
<body>
  <h1>Mock Gist Page</h1>
  <p>This page simulates GitHub Gist structure for E2E testing.</p>
  <div id="test-marker">ready</div>

  <!-- Installable gist file with valid manifest -->
  <div class="file" id="installable-gist">
    <div class="file-header">
      <span class="gist-blob-name">test_script.cljs</span>
      <div class="file-actions">
        <a href="http://localhost:18080/raw/test_script.cljs">Raw</a>
      </div>
    </div>
    <div class="blob-wrapper">
      <pre><code>{:epupp/script-name "Test Installer Script"
 :epupp/auto-run-match "*://test.example.com/*"
 :epupp/description "A test script for E2E testing"}

(ns test-installer-script)

(js/console.log "Test script loaded!")</code></pre>
    </div>
  </div>

  <!-- Non-installable file (no manifest) -->
  <div class="file" id="non-installable-gist">
    <div class="file-header">
      <span class="gist-blob-name">regular_code.cljs</span>
      <div class="file-actions">
        <a href="/raw/regular_code.cljs">Raw</a>
      </div>
    </div>
    <div class="blob-wrapper">
      <pre><code>(ns regular-code)

(defn hello [] "world")</code></pre>
    </div>
  </div>

  <!-- Manual-only gist file (valid manifest but NO auto-run-match) -->
  <div class="file" id="manual-only-gist">
    <div class="file-header">
      <span class="gist-blob-name">manual_only_script.cljs</span>
      <div class="file-actions">
        <a href="http://localhost:18080/raw/manual_only_script.cljs">Raw</a>
      </div>
    </div>
    <div class="blob-wrapper">
      <pre><code>{:epupp/script-name "Manual Only Script"
 :epupp/description "A script with no auto-run-match"}

(ns manual-only-script)

(js/console.log "Manual-only script loaded!")</code></pre>
    </div>
  </div>

  <!-- ========================================
       GitHub Gist Style Code Blocks (table-based)
       ======================================== -->

  <!-- GitHub-style installable gist -->
  <div class="file" id="github-installable-gist">
    <div class="file-header d-flex">
      <div class="file-actions">
        <a href="/raw/github_test_script.cljs">Raw</a>
      </div>
      <div class="file-info">
        <strong class="gist-blob-name">github_test_script.cljs</strong>
      </div>
    </div>
    <div class="blob-wrapper">
      <table class="js-file-line-container" data-tagsearch-path="github_test_script.cljs">
        <tr>
          <td class="blob-num js-line-number" data-line-number="1"></td>
          <td class="blob-code js-file-line">{:epupp/script-name "github_test_script.cljs"</td>
        </tr>
        <tr>
          <td class="blob-num js-line-number" data-line-number="2"></td>
          <td class="blob-code js-file-line"> :epupp/auto-run-match "*://github-test.example.com/*"</td>
        </tr>
        <tr>
          <td class="blob-num js-line-number" data-line-number="3"></td>
          <td class="blob-code js-file-line"> :epupp/description "A GitHub-style test script"}</td>
        </tr>
        <tr>
          <td class="blob-num js-line-number" data-line-number="4"></td>
          <td class="blob-code js-file-line"></td>
        </tr>
        <tr>
          <td class="blob-num js-line-number" data-line-number="5"></td>
          <td class="blob-code js-file-line">(ns github-test-script)</td>
        </tr>
        <tr>
          <td class="blob-num js-line-number" data-line-number="6"></td>
          <td class="blob-code js-file-line"></td>
        </tr>
        <tr>
          <td class="blob-num js-line-number" data-line-number="7"></td>
          <td class="blob-code js-file-line">(js/console.log "GitHub test script loaded!")</td>
        </tr>
      </table>
    </div>
  </div>

  <!-- GitHub-style non-installable (no manifest) -->
  <div class="file" id="github-non-installable">
    <div class="file-header d-flex">
      <div class="file-actions">
        <a href="/raw/github_regular.cljs">Raw</a>
      </div>
      <div class="file-info">
        <strong class="gist-blob-name">github_regular.cljs</strong>
      </div>
    </div>
    <div class="blob-wrapper">
      <table class="js-file-line-container" data-tagsearch-path="github_regular.cljs">
        <tr>
          <td class="blob-num js-line-number" data-line-number="1"></td>
          <td class="blob-code js-file-line">(ns github-regular)</td>
        </tr>
        <tr>
          <td class="blob-num js-line-number" data-line-number="2"></td>
          <td class="blob-code js-file-line"></td>
        </tr>
        <tr>
          <td class="blob-num js-line-number" data-line-number="3"></td>
          <td class="blob-code js-file-line">(defn greet [] "Hello from GitHub")</td>
        </tr>
      </table>
    </div>
  </div>

  <!-- ========================================
       GitLab Snippet Style Code Blocks
       ======================================== -->

  <!-- GitLab-style installable snippet -->
  <div class="file-holder" id="gitlab-installable-snippet" data-snippet-type="clojure">
    <div class="file-title-flex-parent">
      <div class="file-header-content">
        <strong>gitlab_test_script.cljs</strong>
      </div>
      <div class="file-actions">
        <a href="/raw/gitlab_test_script.cljs" class="btn btn-default btn-sm">Raw</a>
      </div>
    </div>
    <div class="blob-content">
      <pre class="code highlight"><code>{:epupp/script-name "gitlab_test_script.cljs"
 :epupp/auto-run-match "*://gitlab-test.example.com/*"
 :epupp/description "A GitLab-style test script"}

(ns gitlab-test-script)

(js/console.log "GitLab test script loaded!")</code></pre>
    </div>
  </div>

  <!-- GitLab-style non-installable (no manifest) -->
  <div class="file-holder" id="gitlab-non-installable" data-snippet-type="clojure">
    <div class="file-title-flex-parent">
      <div class="file-header-content">
        <strong>gitlab_regular.cljs</strong>
      </div>
      <div class="file-actions">
        <a href="/raw/gitlab_regular.cljs" class="btn btn-default btn-sm">Raw</a>
      </div>
    </div>
    <div class="blob-content">
      <pre class="code highlight"><code>(ns gitlab-regular)

(defn greet [] "Hello from GitLab")</code></pre>
    </div>
  </div>

  <!-- ========================================
       Generic Format Tests (Batch C)
       ======================================== -->

  <!-- Pre with nested <code> element -->
  <div class="file" id="pre-nested-code">
    <div class="file-header">
      <span class="gist-blob-name">nested_code_script.cljs</span>
    </div>
    <div class="blob-wrapper">
      <pre><code>{:epupp/script-name "nested_code_script.cljs"
 :epupp/auto-run-match "*://nested-code-test.example.com/*"
 :epupp/description "Test pre with nested code element"}

(ns nested-code-script)

(js/console.log "Nested code script works!")</code></pre>
    </div>
  </div>

  <!-- Pre with syntax-highlighted spans -->
  <div class="file" id="pre-syntax-highlighted">
    <div class="file-header">
      <span class="gist-blob-name">syntax_highlighted_script.cljs</span>
    </div>
    <div class="blob-wrapper">
      <pre><span class="token punctuation">{</span><span class="token keyword">:epupp/script-name</span> <span class="token string">"syntax_highlighted_script.cljs"</span>
 <span class="token keyword">:epupp/auto-run-match</span> <span class="token string">"*://syntax-test.example.com/*"</span>
 <span class="token keyword">:epupp/description</span> <span class="token string">"Test pre with syntax highlighting"</span><span class="token punctuation">}</span>

<span class="token punctuation">(</span><span class="token keyword">ns</span> <span class="token plain">syntax-highlighted-script</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token plain">js/console.log</span> <span class="token string">"Syntax highlighted script works!"</span><span class="token punctuation">)</span></pre>
    </div>
  </div>

  <!-- Textarea element -->
  <div class="file" id="textarea-element">
    <div class="file-header">
      <span class="gist-blob-name">textarea_script.cljs</span>
    </div>
    <div class="blob-wrapper">
      <textarea rows="10" cols="80">{:epupp/script-name "textarea_script.cljs"
 :epupp/auto-run-match "*://textarea-test.example.com/*"
 :epupp/description "Test textarea element"}

(ns textarea-script)

(js/console.log "Textarea script works!")</textarea>
    </div>
  </div>

  <!-- ========================================
       GitHub Repo File Style (React-based)
       Matches real GitHub repo pages structure
       ======================================== -->

  <!-- GitHub repo-style installable file - matches real GitHub structure -->
  <div id="github-repo-installable" class="react-app">
    <div class="react-blob-header-edit-and-raw-actions">
      <div class="prc-ButtonGroup-ButtonGroup-testHash">
        <a href="/raw/github_repo_script.cljs" class="Button">Raw</a>
        <a href="#" class="Button">Blame</a>
      </div>
    </div>
    <div class="react-code-lines">{:epupp/script-name "github_repo_script.cljs"
 :epupp/auto-run-match "*://github-repo-test.example.com/*"
 :epupp/description "A GitHub repo-style test script"}

(ns github-repo-script)

(js/console.log "GitHub repo script loaded!")</div>
  </div>

</body>
</html>
