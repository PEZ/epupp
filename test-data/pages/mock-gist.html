<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Mock Gist Page - Epupp Test</title>
  <style>
    .file { border: 1px solid #ddd; margin: 20px; border-radius: 6px; }
    .file-header { background: #f6f8fa; padding: 10px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; }
    .gist-blob-name { font-weight: bold; }
    .file-actions a { color: #0366d6; margin-left: 10px; }
    .blob-wrapper { padding: 10px; }
    pre { margin: 0; font-family: monospace; white-space: pre-wrap; }
    code { display: block; }
  </style>
</head>
<body>
  <h1>Mock Gist Page</h1>
  <p>This page simulates GitHub Gist structure for E2E testing.</p>
  <div id="test-marker">ready</div>

  <!-- Installable gist file with valid manifest -->
  <div class="file" id="installable-gist">
    <div class="file-header">
      <span class="gist-blob-name">test_script.cljs</span>
      <div class="file-actions">
        <a href="http://localhost:18080/raw/test_script.cljs">Raw</a>
      </div>
    </div>
    <div class="blob-wrapper">
      <pre><code>{:epupp/script-name "Test Installer Script"
 :epupp/auto-run-match "*://test.example.com/*"
 :epupp/description "A test script for E2E testing"}

(ns test-installer-script)

(js/console.log "Test script loaded!")</code></pre>
    </div>
  </div>

  <!-- Non-installable file (no manifest) -->
  <div class="file" id="non-installable-gist">
    <div class="file-header">
      <span class="gist-blob-name">regular_code.cljs</span>
      <div class="file-actions">
        <a href="/raw/regular_code.cljs">Raw</a>
      </div>
    </div>
    <div class="blob-wrapper">
      <pre><code>(ns regular-code)

(defn hello [] "world")</code></pre>
    </div>
  </div>

  <!-- Manual-only gist file (valid manifest but NO auto-run-match) -->
  <div class="file" id="manual-only-gist">
    <div class="file-header">
      <span class="gist-blob-name">manual_only_script.cljs</span>
      <div class="file-actions">
        <a href="http://localhost:18080/raw/manual_only_script.cljs">Raw</a>
      </div>
    </div>
    <div class="blob-wrapper">
      <pre><code>{:epupp/script-name "Manual Only Script"
 :epupp/description "A script with no auto-run-match"}

(ns manual-only-script)

(js/console.log "Manual-only script loaded!")</code></pre>
    </div>
  </div>

</body>
</html>
